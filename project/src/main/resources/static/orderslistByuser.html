<!DOCTYPE html>
<html class="bit-html mobile-false " dir="ltr" lang="zh-CN"><!--<![endif]-->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="renderer" content="webkit"> 
	<meta http-equiv="Cache-Control" content="no-transform"> <!-- for baidu -->
    <meta name="MobileOptimized" content="width"><!-- for baidu -->
    <meta name="HandheldFriendly" content="true"><!-- for baidu -->
   
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">	
	<title>我的产品</title>
	<link rel="stylesheet" href="css/index.css" charset="utf-8">
	<link rel="stylesheet" href="css/detail.css" charset="utf-8">
	<link rel="stylesheet" href="css/shopping.css" charset="utf-8">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/common.js"></script>
			
</head>

<body class="br">
	<div id="header"></div>
	
	<!--主体部分-->
	<div class="pay_body">
		<div class="bb_bar"></div>
		<div class="top_title">
			<span class="p1">所有产品 ></span>
			<span class="p1" id="item">您已经拥有的产品</span><br/>
			<span class="p2" id ="itemName">您的产品</span>
		</div>
		<!--<div class="bb_bar"></div>-->
		<form name=alipayment action=alipaySum method=post target="_blank">  <!--这里的target为_blank是新打开一个窗口-->
			<div class="cart">
				<div class="handle">
					<div class="gapbar"></div>
					<!--购物车商品列表-->
					<div class="cart_bar" id="cart_bar"></div>
					<div class="cart_bar"></div>
					<div style="color: #FF00FF">该功能待开发</div>
				</div>

				<!--无已购买项目显示-->
				<div class="emptyCar">
					<div class="empty_img">
						<img src="images/shippingCar.png"/>
					</div>
					<div class="empty_tex">
						<span>您没有任何产品,您可以&nbsp;:</span></br>
						<span>查看您已经&nbsp;</span><a href="index.html" style='text-decoration:none;'><sp class="emlian">拥有的产品</sp></a></br>
						<a href="index.html" style='text-decoration:none;'><sp class="emlian">继续浏览</sp></a><span>&nbsp;其他产品</span>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div id="footer"></div>
<script type="text/javascript" >
	$(function() {
		$('#header').load('header.html');
		$('#footer').load('footer.html');
	})

	$(document).ready(function() {
		let userId = 1003;
		$.ajax({
			url: '/order/orderGoodsListByUser',
			type: 'POST',
			async: false,
			data: {userId: userId},
			success: function (result) {
				let dataList = result.data;
				if(dataList==null|| dataList==""){  /*购物车是空的*/
					$(".handle").css("display","none");
					/*这里渲染一个空的图片*/
				}else {
					$(".emptyCar").css("display","none");  /*如果购物车有商品隐藏 空模块*/
					let html = "";
					let priceSum = 0;
					console.log(priceSum);
					for (let i in dataList) {
						let godosId = dataList[i].goodsId;
						html +=
							"<div class=\"cartm\">" +
								"<input type=\"hidden\" class=\"shoppingw\" name=\"shoppingId\" value='" + dataList[i].shoppingId + "'/>" +
								"<div class=\"barimg\"><span><img src=\"image/" + godosId +"/"+ dataList[i].goodsImgmain + "\"/></span></div>" +
								"<div class=\"gname\">" + dataList[i].goodsTitle + "</div>" +
								"<div class=\"ginfo\">" + dataList[i].shoppingId + "</div>" +
								"<div class=\"gprice\">￥" + dataList[i].goodsPrice + "</div>" +
								"<a href='javascript:;' class='remove'><div class=\"del\"><img src=\"images/delete.ico\" /></div></a>" +
							"</div>" +
							"<div class=\"gap\"></div>"
						priceSum += parseInt(dataList[i].goodsPrice);
					}
					//$("#cart_bar").html(html);
					//$("#priceSum").html("￥" + priceSum);
					//$("#WIDout_trade_no").val(dataList[0].ordersId);
					//$("#WIDsubject").val(dataList[0].goodsTitle);
					//$("#WIDtotal_amount").val(priceSum);
					//$("#WIDbody").val("支持xx");
				}
			}
		})
	})

</script>

<script type="text/javascript" >
	/*点击删除按钮*/
	/*$(document).ready(function() {
		$(".remove").click(function () {
			let shoppingId = $(this).siblings(".shoppingw").val();
			$(this).parent().remove();/!*删除页面的dom结构*!/
			$.ajax({
				url: 'order/delShopping',
				type: 'POST',
				async: false,
				data: {shoppingId: shoppingId},
				success: function (result) {
					window.location.reload(); /!*刷新当前页面*!/
				}
			})
		});
	})*/
</script>

	

</body>
</html>